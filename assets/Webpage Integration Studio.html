<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Web Studio & Live Inspector</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=Fira+Code:wght@400;500&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; overflow: hidden; }
        
        /* Code Editor Theming */
        #main-editor {
            font-family: 'Fira Code', 'Menlo', monospace;
            background-color: #0f172a;
            color: #e2e8f0;
            line-height: 1.6;
            tab-size: 2;
        }

        #live-preview-iframe {
            width: 100%;
            height: 100%;
            border: none;
            background: white;
        }

        .custom-scrollbar::-webkit-scrollbar { width: 8px; height: 8px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: #1e293b; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #475569; border-radius: 4px; }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover { background: #64748b; }

        /* Component Detail Area */
        #code-snippet-display {
            font-family: 'Fira Code', monospace;
            font-size: 11px;
            background: #f8fafc;
        }

        /* Sparkle Animation */
        @keyframes sparkle {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.7; transform: scale(1.1); }
        }
        .animate-sparkle { animation: sparkle 2s infinite ease-in-out; }

        /* Toast notifications */
        #toast {
            position: fixed;
            bottom: 2rem;
            left: 50%;
            transform: translateX(-50%) translateY(100px);
            transition: transform 0.3s ease;
            z-index: 100;
        }
        #toast.show { transform: translateX(-50%) translateY(0); }
    </style>
</head>
<body class="h-screen bg-slate-50 flex flex-col">

    <!-- Toast UI -->
    <div id="toast" class="bg-slate-900 text-white px-6 py-3 rounded-full shadow-2xl flex items-center gap-3">
        <span id="toast-icon">‚ú®</span>
        <span id="toast-msg">Success!</span>
    </div>

    <!-- Header -->
    <header class="h-14 bg-white border-b border-slate-200 flex-shrink-0 z-30 shadow-sm flex items-center px-6 justify-between">
        <div class="flex items-center gap-3">
            <div class="w-8 h-8 bg-indigo-600 rounded-lg flex items-center justify-center text-white font-bold shadow-indigo-200 shadow-lg">S</div>
            <h1 class="text-lg font-bold text-slate-800 tracking-tight">AI Studio <span class="text-indigo-600">v2</span></h1>
        </div>
        
        <div class="flex items-center gap-4">
            <div class="h-8 w-px bg-slate-200"></div>
            <button onclick="resetToTemplate()" class="text-slate-500 hover:text-slate-800 text-xs font-semibold px-2 py-1 transition">Reset</button>
            <button onclick="downloadPage()" class="bg-indigo-600 text-white px-4 py-2 rounded-lg text-xs font-bold shadow-md hover:bg-indigo-700 transition flex items-center gap-2">
                <svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path></svg>
                Export HTML
            </button>
        </div>
    </header>

    <main class="flex-grow flex overflow-hidden">
        <!-- 1. Sidebar -->
        <div class="w-64 bg-white border-r border-slate-200 flex flex-col flex-shrink-0">
            <div class="p-4">
                <button onclick="openAIModal()" class="w-full bg-gradient-to-br from-indigo-600 to-violet-700 text-white p-3 rounded-xl shadow-lg hover:shadow-indigo-200 hover:scale-[1.02] active:scale-[0.98] transition-all duration-200 flex items-center justify-center gap-2 group">
                    <span class="text-lg animate-sparkle">‚ú®</span>
                    <span class="font-bold text-xs uppercase tracking-wider">AI Generator</span>
                </button>
            </div>
            
            <div class="px-4 py-2 bg-slate-50 border-y border-slate-100">
                <h2 class="text-[10px] font-bold text-slate-400 uppercase tracking-widest">Component Library</h2>
            </div>

            <div id="component-list" class="flex-grow overflow-y-auto p-3 space-y-2 custom-scrollbar">
                <!-- Injected via JS -->
            </div>
        </div>

        <!-- 2. Main Canvas -->
        <div class="flex-grow grid grid-cols-2">
            
            <!-- Code Editor Side -->
            <div class="flex flex-col border-r border-slate-200">
                <div class="h-10 bg-slate-900 flex items-center px-4 justify-between border-b border-slate-800">
                    <div class="flex items-center gap-2">
                        <div class="flex gap-1.5">
                            <div class="w-2.5 h-2.5 rounded-full bg-red-500/80"></div>
                            <div class="w-2.5 h-2.5 rounded-full bg-amber-500/80"></div>
                            <div class="w-2.5 h-2.5 rounded-full bg-emerald-500/80"></div>
                        </div>
                        <span class="text-[10px] text-slate-400 font-mono ml-4">index.html</span>
                    </div>
                </div>
                
                <textarea id="main-editor" 
                          spellcheck="false" 
                          oninput="updatePreview()" 
                          class="flex-grow p-6 focus:outline-none resize-none custom-scrollbar text-sm"
                          placeholder="<!-- Start building here... -->"></textarea>

                <!-- Snippet Inspector -->
                <div class="h-64 bg-white border-t border-slate-200 flex flex-col">
                    <div class="px-4 py-2 border-b border-slate-100 flex justify-between items-center bg-slate-50/50">
                        <span class="text-[10px] font-bold text-slate-500 uppercase">Library Preview</span>
                        <button id="insert-btn" onclick="insertSnippet()" disabled class="text-indigo-600 text-[10px] font-bold uppercase hover:underline disabled:opacity-30">Insert into Code</button>
                    </div>
                    <div class="flex-grow grid grid-cols-3 overflow-hidden">
                        <div id="snippet-info" class="p-4 text-xs text-slate-500 border-r border-slate-100 overflow-y-auto custom-scrollbar">
                            Select a component to preview its code.
                        </div>
                        <textarea id="code-snippet-display" readonly class="col-span-2 p-4 focus:outline-none custom-scrollbar"></textarea>
                    </div>
                </div>
            </div>

            <!-- Preview Side -->
            <div class="flex flex-col bg-slate-200">
                <div class="h-10 bg-white border-b border-slate-200 flex items-center px-4 justify-between">
                    <div class="flex items-center gap-4">
                        <div class="flex items-center gap-2">
                            <div class="relative inline-flex items-center cursor-pointer">
                                <input type="checkbox" id="inspector-toggle" class="sr-only peer" onchange="updatePreview()">
                                <div class="w-9 h-5 bg-slate-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-indigo-600"></div>
                                <label for="inspector-toggle" class="ml-2 text-xs font-bold text-slate-600 select-none">Live Inspector</label>
                            </div>
                        </div>
                    </div>
                    <div class="flex gap-2">
                        <div class="px-2 py-0.5 rounded bg-slate-100 text-[10px] font-mono text-slate-500">Live View</div>
                    </div>
                </div>
                <div class="flex-grow relative overflow-hidden bg-white shadow-inner">
                    <iframe id="live-preview-iframe"></iframe>
                </div>
            </div>
        </div>
    </main>

    <!-- AI Modal -->
    <div id="ai-modal" class="fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-50 flex items-center justify-center hidden">
        <div class="bg-white w-full max-w-lg rounded-2xl shadow-2xl overflow-hidden transform transition-all">
            <div class="p-6 border-b border-slate-100 flex justify-between items-center">
                <h3 class="text-xl font-bold text-slate-800 flex items-center gap-2">
                    <span class="text-2xl">‚ö°</span> AI Component Builder
                </h3>
                <button onclick="closeAIModal()" class="text-slate-400 hover:text-slate-600 transition">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                </button>
            </div>
            <div class="p-6 space-y-4">
                <p class="text-sm text-slate-500">Describe what you want to build. Our AI will generate modern, responsive Tailwind HTML for you.</p>
                <textarea id="ai-prompt" class="w-full h-32 p-4 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-indigo-500 focus:outline-none transition resize-none" placeholder="Example: A dark mode navbar with a search bar and profile dropdown..."></textarea>
                <div id="ai-error" class="hidden p-3 bg-red-50 text-red-600 text-xs rounded-lg border border-red-100"></div>
                <div class="flex justify-end gap-3">
                    <button onclick="closeAIModal()" class="px-5 py-2.5 text-slate-500 font-bold text-xs uppercase tracking-wider hover:bg-slate-50 rounded-lg transition">Cancel</button>
                    <button id="ai-generate-btn" onclick="generateAIComponent()" class="bg-indigo-600 text-white px-6 py-2.5 rounded-lg text-xs font-bold uppercase tracking-widest shadow-lg shadow-indigo-100 hover:bg-indigo-700 transition flex items-center gap-2">
                        <span>Generate Component</span>
                        <div id="ai-loader" class="hidden w-3 h-3 border-2 border-white/30 border-t-white rounded-full animate-spin"></div>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // --- Core Setup ---
        const apiKey = ""; // Platform key
        let previewUpdateTimer;
        let components = {};

        // --- Library Data ---
        const LIBRARY = {
            'Navbar': {
                description: 'Responsive standard navigation with links.',
                html: `<nav class="bg-white border-b border-slate-200 px-6 h-16 flex items-center justify-between">
  <div class="flex items-center gap-8">
    <div class="text-xl font-black text-slate-900">LOGO</div>
    <div class="hidden md:flex gap-6">
      <a href="#" class="text-sm font-medium text-slate-600 hover:text-indigo-600">Features</a>
      <a href="#" class="text-sm font-medium text-slate-600 hover:text-indigo-600">Pricing</a>
      <a href="#" class="text-sm font-medium text-slate-600 hover:text-indigo-600">Company</a>
    </div>
  </div>
  <div class="flex items-center gap-3">
    <button class="px-4 py-2 text-sm font-semibold text-slate-600">Log in</button>
    <button class="bg-indigo-600 text-white px-4 py-2 rounded-lg text-sm font-semibold shadow-md">Get Started</button>
  </div>
</nav>`
            },
            'Hero': {
                description: 'Large hero section with CTA.',
                html: `<section class="py-24 px-6 bg-slate-50">
  <div class="max-w-4xl mx-auto text-center">
    <h1 class="text-5xl md:text-6xl font-black text-slate-900 leading-[1.1] mb-6">
      Build something <span class="text-indigo-600">extraordinary</span> with AI
    </h1>
    <p class="text-lg text-slate-600 mb-10 max-w-2xl mx-auto">
      The ultimate visual editor for high-performance landing pages. Generate components instantly and ship faster.
    </p>
    <div class="flex justify-center gap-4">
      <button class="bg-slate-900 text-white px-8 py-4 rounded-xl font-bold shadow-xl">Start Free Trial</button>
      <button class="bg-white text-slate-900 border border-slate-200 px-8 py-4 rounded-xl font-bold shadow-sm">View Demo</button>
    </div>
  </div>
</section>`
            },
            'Feature Grid': {
                description: '3-column feature showcase.',
                html: `<div class="py-20 px-6 max-w-7xl mx-auto grid grid-cols-1 md:grid-cols-3 gap-12">
  <div class="space-y-4">
    <div class="w-12 h-12 bg-indigo-100 text-indigo-600 rounded-2xl flex items-center justify-center text-xl">üöÄ</div>
    <h3 class="text-xl font-bold text-slate-900">Ultra Fast</h3>
    <p class="text-slate-500 text-sm leading-relaxed">Optimized for speed and performance out of the box with zero configuration required.</p>
  </div>
  <div class="space-y-4">
    <div class="w-12 h-12 bg-rose-100 text-rose-600 rounded-2xl flex items-center justify-center text-xl">üõ°Ô∏è</div>
    <h3 class="text-xl font-bold text-slate-900">Secure by Default</h3>
    <p class="text-slate-500 text-sm leading-relaxed">Enterprise-grade security features built into every component we provide to you.</p>
  </div>
  <div class="space-y-4">
    <div class="w-12 h-12 bg-emerald-100 text-emerald-600 rounded-2xl flex items-center justify-center text-xl">‚öôÔ∏è</div>
    <h3 class="text-xl font-bold text-slate-900">Fully Customizable</h3>
    <p class="text-slate-500 text-sm leading-relaxed">Adjust every single pixel to match your brand identity with our powerful Tailwind utilities.</p>
  </div>
</div>`
            },
            'Pricing': {
                description: 'Three tier pricing cards.',
                html: `<div class="py-20 px-6 bg-white">
  <div class="max-w-5xl mx-auto grid grid-cols-1 md:grid-cols-3 gap-8">
    <div class="border border-slate-200 p-8 rounded-3xl hover:border-indigo-600 transition group">
      <div class="text-slate-500 font-bold text-xs uppercase tracking-widest mb-4">Starter</div>
      <div class="text-4xl font-black mb-6">$0<span class="text-sm text-slate-400 font-normal">/mo</span></div>
      <ul class="space-y-4 mb-8 text-sm text-slate-600">
        <li>‚úÖ 5 Projects</li>
        <li>‚úÖ Basic Analytics</li>
        <li>‚úÖ Community Support</li>
      </ul>
      <button class="w-full py-3 rounded-xl border border-slate-200 font-bold text-sm hover:bg-slate-50 transition">Choose Plan</button>
    </div>
    <div class="bg-slate-900 p-8 rounded-3xl shadow-2xl shadow-indigo-200 transform md:-translate-y-4 relative overflow-hidden">
      <div class="absolute top-0 right-0 bg-indigo-600 text-white px-4 py-1 text-[10px] font-bold rounded-bl-xl">POPULAR</div>
      <div class="text-slate-400 font-bold text-xs uppercase tracking-widest mb-4">Pro</div>
      <div class="text-4xl text-white font-black mb-6">$29<span class="text-sm text-slate-500 font-normal">/mo</span></div>
      <ul class="space-y-4 mb-8 text-sm text-slate-300">
        <li>‚úÖ Unlimited Projects</li>
        <li>‚úÖ Pro Analytics</li>
        <li>‚úÖ 24/7 Priority Support</li>
      </ul>
      <button class="w-full py-3 rounded-xl bg-indigo-600 text-white font-bold text-sm shadow-lg shadow-indigo-600/20">Upgrade Now</button>
    </div>
    <div class="border border-slate-200 p-8 rounded-3xl">
      <div class="text-slate-500 font-bold text-xs uppercase tracking-widest mb-4">Team</div>
      <div class="text-4xl font-black mb-6">$99<span class="text-sm text-slate-400 font-normal">/mo</span></div>
      <ul class="space-y-4 mb-8 text-sm text-slate-600">
        <li>‚úÖ Entire Teams</li>
        <li>‚úÖ Advanced Security</li>
        <li>‚úÖ Dedicated Manager</li>
      </ul>
      <button class="w-full py-3 rounded-xl border border-slate-200 font-bold text-sm">Contact Sales</button>
    </div>
  </div>
</div>`
            }
        };

        // --- Core Logic ---

        function updatePreview() {
            clearTimeout(previewUpdateTimer);
            previewUpdateTimer = setTimeout(() => {
                const isInspectorEnabled = document.getElementById('inspector-toggle').checked;
                const rawLines = document.getElementById('main-editor').value.split('\n');
                
                // --- LINE TAGGING LOGIC ---
                // We inject data-source-line into opening tags to allow the inspector to find them perfectly.
                const processedLines = rawLines.map((line, index) => {
                    // Match the first opening tag in a line: <div or <section or <a etc.
                    // We only inject into lines that seem to start or contain a tag start
                    return line.replace(/<([a-z0-9]+)(\s|>)/i, (match, tag, rest) => {
                        return `<${tag} data-source-line="${index}" ${rest === '>' ? '>' : ' ' + rest}`;
                    });
                });
                
                const finalHtml = processedLines.join('\n');

                const inspectorScript = `
                <script>
                    let currentOverlay = null;

                    document.body.addEventListener('mousemove', (e) => {
                        if(!window.parent || !${isInspectorEnabled}) return;

                        // Find closest element with a line tag
                        const target = e.target.closest('[data-source-line]');
                        if(!target) return;

                        e.stopPropagation();

                        // Visual highlight
                        if(currentOverlay) currentOverlay.classList.remove('inspector-active');
                        target.classList.add('inspector-active');
                        currentOverlay = target;

                        // Tell parent to scroll
                        window.parent.postMessage({
                            type: 'inspector-hover',
                            line: parseInt(target.getAttribute('data-source-line'))
                        }, '*');
                    });

                    document.body.addEventListener('mouseleave', () => {
                         if(currentOverlay) currentOverlay.classList.remove('inspector-active');
                    });
                <\/script>
                <style>
                    .inspector-active {
                        outline: 2px solid #6366f1 !important;
                        outline-offset: -2px;
                        background-color: rgba(99, 102, 241, 0.05) !important;
                        cursor: crosshair;
                    }
                </style>`;

                const fullDoc = `
                <!DOCTYPE html>
                <html>
                <head>
                    <meta charset="UTF-8">
                    <script src="https://cdn.tailwindcss.com"><\/script>
                    <style>body { margin: 0; min-height: 100vh; font-family: sans-serif; }</style>
                    ${isInspectorEnabled ? inspectorScript : ''}
                </head>
                <body>${finalHtml}</body>
                </html>`;

                const iframe = document.getElementById('live-preview-iframe');
                const doc = iframe.contentWindow.document;
                doc.open();
                doc.write(fullDoc);
                doc.close();
            }, 250);
        }

        // --- Iframe Communication ---
        window.addEventListener('message', (e) => {
            if(e.data.type === 'inspector-hover') {
                const lineIdx = e.data.line;
                const editor = document.getElementById('main-editor');
                const lines = editor.value.split('\n');
                
                if(lineIdx >= 0 && lineIdx < lines.length) {
                    // Calculate character offsets
                    let start = 0;
                    for(let i = 0; i < lineIdx; i++) {
                        start += lines[i].length + 1;
                    }
                    const end = start + lines[lineIdx].length;

                    // Select and scroll
                    editor.focus();
                    editor.setSelectionRange(start, end);

                    // Smooth scroll estimation
                    const fontSize = 14;
                    const lineHeight = 1.6;
                    const pixelPos = lineIdx * (fontSize * lineHeight);
                    editor.scrollTo({
                        top: pixelPos - (editor.clientHeight / 2),
                        behavior: 'auto'
                    });
                }
            }
        });

        // --- Library Logic ---

        function initLibrary() {
            const list = document.getElementById('component-list');
            Object.keys(LIBRARY).forEach(name => {
                const div = document.createElement('div');
                div.className = "p-3 rounded-lg border border-slate-100 bg-white hover:border-indigo-200 hover:shadow-sm cursor-pointer transition group";
                div.onclick = () => selectComponent(name, div);
                div.innerHTML = `
                    <div class="flex justify-between items-center mb-1">
                        <span class="text-xs font-bold text-slate-700">${name}</span>
                        <svg class="w-3 h-3 text-slate-300 group-hover:text-indigo-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M9 5l7 7-7 7" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/></svg>
                    </div>
                    <p class="text-[10px] text-slate-400 truncate">${LIBRARY[name].description}</p>
                `;
                list.appendChild(div);
            });
        }

        let selectedSnippet = "";

        function selectComponent(name, el) {
            document.querySelectorAll('#component-list > div').forEach(d => d.classList.remove('border-indigo-600', 'ring-1', 'ring-indigo-100'));
            el.classList.add('border-indigo-600', 'ring-1', 'ring-indigo-100');
            
            selectedSnippet = LIBRARY[name].html;
            document.getElementById('code-snippet-display').value = selectedSnippet;
            document.getElementById('snippet-info').innerHTML = `
                <div class="font-bold text-slate-800 mb-1">${name}</div>
                <div>${LIBRARY[name].description}</div>
            `;
            document.getElementById('insert-btn').disabled = false;
        }

        function insertSnippet() {
            if(!selectedSnippet) return;
            const editor = document.getElementById('main-editor');
            const start = editor.selectionStart;
            const end = editor.selectionEnd;
            const val = editor.value;

            editor.value = val.substring(0, start) + "\n" + selectedSnippet + "\n" + val.substring(end);
            updatePreview();
            showToast("Component Inserted!");
        }

        // --- AI Magic ---

        function openAIModal() { document.getElementById('ai-modal').classList.remove('hidden'); }
        function closeAIModal() { document.getElementById('ai-modal').classList.add('hidden'); }

        async function generateAIComponent() {
            const prompt = document.getElementById('ai-prompt').value.trim();
            if(!prompt) return;

            const btn = document.getElementById('ai-generate-btn');
            const loader = document.getElementById('ai-loader');
            const error = document.getElementById('ai-error');

            btn.disabled = true;
            loader.classList.remove('hidden');
            error.classList.add('hidden');

            try {
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        contents: [{ parts: [{ text: `Generate a high-quality responsive Tailwind CSS HTML component for: ${prompt}. 
                        Rules: 
                        1. Return ONLY the HTML code.
                        2. No markdown blocks.
                        3. Modern aesthetics (rounded corners, soft shadows).
                        4. Use placeholder images if needed (https://images.unsplash.com/...).` }] }]
                    })
                });

                const data = await response.json();
                let html = data.candidates?.[0]?.content?.parts?.[0]?.text;
                
                if(!html) throw new Error("Could not generate component. Try a different prompt.");

                // Clean up in case AI included markdown
                html = html.replace(/```html|```/g, '').trim();

                const name = "AI: " + prompt.substring(0, 15) + "...";
                LIBRARY[name] = {
                    description: 'Custom AI generated component.',
                    html: html
                };

                // Add to list
                const list = document.getElementById('component-list');
                const div = document.createElement('div');
                div.className = "p-3 rounded-lg border-2 border-indigo-100 bg-indigo-50/30 hover:border-indigo-300 cursor-pointer transition group";
                div.onclick = () => selectComponent(name, div);
                div.innerHTML = `
                    <div class="flex justify-between items-center mb-1">
                        <span class="text-xs font-bold text-indigo-700">‚ú® ${name}</span>
                    </div>
                `;
                list.prepend(div);
                
                selectComponent(name, div);
                closeAIModal();
                showToast("AI Generated Success!");

            } catch (err) {
                error.textContent = err.message;
                error.classList.remove('hidden');
            } finally {
                btn.disabled = false;
                loader.classList.add('hidden');
            }
        }

        // --- Utilities ---

        function showToast(msg) {
            const t = document.getElementById('toast');
            document.getElementById('toast-msg').textContent = msg;
            t.classList.add('show');
            setTimeout(() => t.classList.remove('show'), 3000);
        }

        function resetToTemplate() {
            document.getElementById('main-editor').value = 
                LIBRARY['Navbar'].html + "\n\n" + 
                LIBRARY['Hero'].html + "\n\n" + 
                LIBRARY['Feature Grid'].html + "\n\n" + 
                LIBRARY['Pricing'].html;
            updatePreview();
        }

        function downloadPage() {
            const code = document.getElementById('main-editor').value;
            const full = `<!DOCTYPE html><html><head><meta charset="UTF-8"><script src="https://cdn.tailwindcss.com"><\/script></head><body>${code}</body></html>`;
            const blob = new Blob([full], {type: 'text/html'});
            const a = document.createElement('a');
            a.href = URL.createObjectURL(blob);
            a.download = 'index.html';
            a.click();
        }

        window.onload = () => {
            initLibrary();
            resetToTemplate();
        };

    </script>
</body>
</html>