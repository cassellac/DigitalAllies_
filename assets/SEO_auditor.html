<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Digital Allies SEO Audit Assistant</title>
    <style>
        /* --- CSS Variables based on Digital Allies Brand --- */
        :root {
            --color-white: #ffffff;
            --color-cream-50: #fcfcf9;
            --color-cream-100: #f5f5f3;
            --color-gray-200: #e5e5e5;
            --color-gray-500: #64748b;
            --color-slate-900: #13343b; /* Deep Teal/Slate */
            --color-teal-500: #21808d;
            --color-teal-600: #1d7480;
            --color-red-500: #c0152f;
            --color-red-bg: rgba(192, 21, 47, 0.1);
            --color-orange-500: #a84b2f;
            --color-orange-bg: rgba(168, 75, 47, 0.1);
            --color-green-500: #10b981;
            --color-green-bg: rgba(16, 185, 129, 0.1);
            
            --font-sans: "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --radius-md: 8px;
            --radius-lg: 12px;
        }

        /* --- Reset & Base Styles --- */
        * { box-sizing: border-box; }
        
        body {
            margin: 0;
            padding: 0;
            font-family: var(--font-sans);
            background-color: var(--color-cream-50);
            color: var(--color-slate-900);
            line-height: 1.5;
            -webkit-font-smoothing: antialiased;
        }

        /* --- Layout --- */
        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        /* --- Typography --- */
        h1, h2, h3, h4 { margin: 0; font-weight: 700; color: var(--color-slate-900); }
        h1 { font-size: 2.25rem; margin-bottom: 0.5rem; letter-spacing: -0.025em; }
        h2 { font-size: 1.5rem; margin-bottom: 1rem; }
        h3 { font-size: 1.125rem; margin-bottom: 0.5rem; }
        p { margin: 0 0 1rem 0; color: var(--color-gray-500); }

        .subtitle { font-size: 1.125rem; margin-bottom: 2rem; }

        /* --- Forms --- */
        .card {
            background: var(--color-white);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-sm);
            padding: 2rem;
            margin-bottom: 2rem;
            border: 1px solid var(--color-gray-200);
        }

        .form-group { margin-bottom: 1.5rem; }
        
        label {
            display: block;
            font-size: 0.875rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--color-slate-900);
        }

        input[type="url"], 
        input[type="text"], 
        textarea {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid var(--color-gray-200);
            border-radius: var(--radius-md);
            font-size: 1rem;
            transition: border-color 0.15s ease, box-shadow 0.15s ease;
            font-family: inherit;
        }

        input:focus, textarea:focus {
            outline: none;
            border-color: var(--color-teal-500);
            box-shadow: 0 0 0 3px rgba(33, 128, 141, 0.15);
        }

        /* --- Checkbox Grid --- */
        .checkbox-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 1rem;
            margin-top: 0.5rem;
        }

        .checkbox-item {
            display: flex;
            align-items: center;
            padding: 0.75rem;
            border: 1px solid var(--color-gray-200);
            border-radius: var(--radius-md);
            cursor: pointer;
            transition: background-color 0.15s;
        }

        .checkbox-item:hover { background-color: var(--color-cream-50); }

        input[type="checkbox"] {
            width: 1.125rem;
            height: 1.125rem;
            margin-right: 0.75rem;
            accent-color: var(--color-teal-500);
            cursor: pointer;
        }

        /* --- Buttons --- */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 0.75rem 1.5rem;
            font-weight: 600;
            border-radius: var(--radius-md);
            border: none;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 1rem;
            text-decoration: none;
        }

        .btn-primary {
            background-color: var(--color-teal-500);
            color: white;
            width: 100%;
        }

        .btn-primary:hover { background-color: var(--color-teal-600); transform: translateY(-1px); }
        .btn-primary:active { transform: translateY(0); }
        .btn-primary:disabled { opacity: 0.7; cursor: not-allowed; transform: none; }

        .btn-secondary {
            background-color: white;
            border: 1px solid var(--color-gray-200);
            color: var(--color-slate-900);
            font-size: 0.875rem;
            padding: 0.5rem 1rem;
        }
        .btn-secondary:hover { background-color: var(--color-cream-50); border-color: var(--color-gray-500); }

        .actions-bar {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-top: 2rem;
            padding-top: 2rem;
            border-top: 1px solid var(--color-gray-200);
        }

        /* --- Loading State --- */
        .loading-container {
            display: none;
            text-align: center;
            padding: 3rem 0;
        }
        .loading-container.active { display: block; }

        .spinner {
            width: 40px;
            height: 40px;
            border: 3px solid var(--color-gray-200);
            border-top-color: var(--color-teal-500);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 1rem;
        }
        @keyframes spin { to { transform: rotate(360deg); } }

        /* --- Results Dashboard --- */
        .results-section { display: none; }
        .results-section.active { display: block; }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            background: white;
            padding: 1.5rem;
            border-radius: var(--radius-lg);
            text-align: center;
            box-shadow: var(--shadow-sm);
            border: 1px solid var(--color-gray-200);
        }

        .stat-value { font-size: 2rem; font-weight: 700; line-height: 1; margin-bottom: 0.5rem; }
        .stat-label { font-size: 0.75rem; text-transform: uppercase; letter-spacing: 0.05em; color: var(--color-gray-500); font-weight: 600; }

        .score-good { color: var(--color-green-500); }
        .score-warn { color: var(--color-orange-500); }
        .score-bad { color: var(--color-red-500); }

        /* --- Detail Cards --- */
        .audit-item {
            background: white;
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-sm);
            margin-bottom: 1.5rem;
            overflow: hidden;
            border: 1px solid var(--color-gray-200);
            transition: transform 0.2s;
        }

        .audit-header {
            padding: 1.25rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: var(--color-cream-50);
            border-bottom: 1px solid var(--color-gray-200);
        }

        .status-badge {
            padding: 0.25rem 0.75rem;
            border-radius: 999px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
        }
        .status-pass { background: var(--color-green-bg); color: var(--color-green-500); }
        .status-warn { background: var(--color-orange-bg); color: var(--color-orange-500); }
        .status-fail { background: var(--color-red-bg); color: var(--color-red-500); }

        .audit-body { padding: 1.5rem; }

        .issues-list {
            list-style: none;
            padding: 0;
            margin: 0 0 1.5rem 0;
        }
        .issues-list li {
            position: relative;
            padding-left: 1.5rem;
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
            color: var(--color-slate-900);
        }
        .issues-list li::before {
            content: "‚Ä¢";
            position: absolute;
            left: 0;
            color: var(--color-red-500);
            font-weight: bold;
        }

        /* --- Recommendations Section --- */
        .rec-box {
            background: var(--color-cream-100);
            border-radius: var(--radius-md);
            padding: 1rem;
            margin-top: 1rem;
            border-left: 4px solid var(--color-teal-500);
        }
        .rec-title { font-weight: 600; font-size: 0.9rem; margin-bottom: 0.5rem; display: flex; align-items: center; gap: 0.5rem; }
        .rec-title::before { content: "üí°"; }
        
        .code-snippet {
            background: var(--color-slate-900);
            color: #e2e8f0;
            padding: 0.75rem;
            border-radius: 6px;
            font-family: "Menlo", "Monaco", monospace;
            font-size: 0.8rem;
            overflow-x: auto;
            margin-top: 0.5rem;
            white-space: pre-wrap;
        }

        /* --- Print / PDF Styles --- */
        @media print {
            body { background: white; -webkit-print-color-adjust: exact; print-color-adjust: exact; }
            .container { padding: 0; max-width: 100%; }
            
            /* Hide input sections when printing report */
            .input-section, .actions-bar, .no-print { display: none !important; }
            
            .results-section { display: block !important; }
            
            .card, .audit-item, .stat-card {
                box-shadow: none;
                border: 1px solid #ddd;
                break-inside: avoid;
            }

            /* Report Header for Print */
            .report-header-print {
                display: block !important;
                margin-bottom: 2rem;
                padding-bottom: 1rem;
                border-bottom: 2px solid var(--color-teal-500);
            }
            
            .report-meta {
                display: grid;
                grid-template-columns: 1fr 1fr;
                font-size: 0.9rem;
                color: var(--color-gray-500);
                margin-top: 1rem;
            }

            h1 { font-size: 24pt; color: var(--color-slate-900); }
            a { text-decoration: none; color: black; }
        }

        .report-header-print { display: none; }
    </style>
</head>
<body>

<div class="container">
    
    <!-- Report Header (Visible only in Print/PDF mode) -->
    <div class="report-header-print">
        <h1>SEO & AI Visibility Audit</h1>
        <div class="report-meta">
            <div id="printUrl">Website: </div>
            <div id="printDate">Date: </div>
        </div>
    </div>

    <!-- Main Input Section -->
    <div class="input-section">
        <div style="text-align: center; margin-bottom: 3rem;">
            <div style="width: 60px; height: 60px; background: var(--color-teal-500); border-radius: 12px; margin: 0 auto 1rem; display: flex; align-items: center; justify-content: center; font-size: 30px;">üîç</div>
            <h1>SEO Audit Assistant</h1>
            <p class="subtitle">Analyze your website for missing SEO elements and get AI-powered recommendations.</p>
        </div>

        <div class="card">
            <div class="form-group">
                <label for="urlInput">Website URL</label>
                <input type="url" id="urlInput" placeholder="https://example.com" value="https://example.com" required>
            </div>

            <div class="form-group">
                <label>Audit Scope</label>
                <div class="checkbox-grid">
                    <label class="checkbox-item"><input type="checkbox" value="meta" checked> Meta Tags & Titles</label>
                    <label class="checkbox-item"><input type="checkbox" value="alt" checked> Image Alt Text</label>
                    <label class="checkbox-item"><input type="checkbox" value="headings" checked> Heading Structure</label>
                    <label class="checkbox-item"><input type="checkbox" value="schema" checked> Schema Markup</label>
                    <label class="checkbox-item"><input type="checkbox" value="links" checked> Internal Links</label>
                    <label class="checkbox-item"><input type="checkbox" value="performance" checked> Performance</label>
                </div>
            </div>

            <div class="form-group">
                <label for="keywords">Target Keywords (Optional)</label>
                <input type="text" id="keywords" placeholder="e.g. digital marketing, seo services, web design">
                <p style="font-size: 0.8rem; margin-top: 0.5rem;">We'll check if these appear in your titles and headings.</p>
            </div>

            <button class="btn btn-primary" onclick="runAudit()">Run Comprehensive Audit</button>
            <p style="text-align: center; font-size: 0.8rem; margin-top: 1rem; color: var(--color-gray-500);">
                * Note: This is a client-side simulation. In a production app, this would trigger a backend crawler.
            </p>
        </div>
    </div>

    <!-- Loading State -->
    <div id="loadingState" class="loading-container">
        <div class="spinner"></div>
        <h3>Analyzing Website...</h3>
        <p>Crawling pages, checking schema, and generating AI insights.</p>
    </div>

    <!-- Results Section -->
    <div id="resultsSection" class="results-section">
        <div class="no-print" style="margin-bottom: 2rem;">
            <button class="btn btn-secondary" onclick="resetAudit()">‚Üê Back to Audit</button>
        </div>

        <!-- Summary Stats -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-value" id="scoreOverall">--</div>
                <div class="stat-label">Overall Score</div>
            </div>
            <div class="stat-card">
                <div class="stat-value score-good" id="countPass">--</div>
                <div class="stat-label">Passed Checks</div>
            </div>
            <div class="stat-card">
                <div class="stat-value score-warn" id="countWarn">--</div>
                <div class="stat-label">Warnings</div>
            </div>
            <div class="stat-card">
                <div class="stat-value score-bad" id="countErr">--</div>
                <div class="stat-label">Critical Errors</div>
            </div>
        </div>

        <div id="auditResultsGrid">
            <!-- Dynamic Content populated by JS -->
        </div>

        <div class="actions-bar">
            <button class="btn btn-secondary" onclick="window.print()">üñ®Ô∏è Print / Save as PDF</button>
            <button class="btn btn-secondary" onclick="exportJson()">üì• Export JSON Data</button>
        </div>
    </div>

</div>

<script>
    let currentAuditData = null;

    function runAudit() {
        const url = document.getElementById('urlInput').value;
        const keywords = document.getElementById('keywords').value;

        if(!url) {
            alert("Please enter a valid URL");
            return;
        }

        // UI State
        document.querySelector('.input-section').style.display = 'none';
        document.getElementById('loadingState').classList.add('active');

        // Simulate API/Crawler Delay (2.5 seconds)
        setTimeout(() => {
            const results = generateMockData(url, keywords);
            currentAuditData = results;
            renderResults(results);
            
            document.getElementById('loadingState').classList.remove('active');
            document.getElementById('resultsSection').classList.add('active');
            
            // Set Print Headers
            document.getElementById('printUrl').textContent = `Website: ${url}`;
            document.getElementById('printDate').textContent = `Date: ${new Date().toLocaleDateString()}`;
        }, 2000);
    }

    function resetAudit() {
        document.querySelector('.input-section').style.display = 'block';
        document.getElementById('resultsSection').classList.remove('active');
        window.scrollTo(0, 0);
    }

    // --- Mock Data Generator (Replace with actual backend logic in production) ---
    function generateMockData(url, keywordString) {
        const keywords = keywordString ? keywordString.split(',').map(k => k.trim()) : [];
        const mainKeyword = keywords.length > 0 ? keywords[0] : "your main keyword";

        return {
            overallScore: 72,
            timestamp: new Date().toISOString(),
            url: url,
            checks: [
                {
                    id: 'meta',
                    title: 'Meta Titles & Descriptions',
                    status: 'error',
                    score: 45,
                    description: 'Meta tags are critical for click-through rates and search engine understanding.',
                    issues: [
                        'Home page title tag is missing primary keyword.',
                        'Meta description is too short (under 50 characters).',
                        'Duplicate title tags found on 3 sub-pages.'
                    ],
                    recommendation: {
                        title: 'Optimize Title Tags',
                        text: `Ensure your home page title includes "${mainKeyword}" near the beginning. Keep descriptions between 150-160 characters.`,
                        code: `<title>Best ${mainKeyword} | Brand Name</title>\n<meta name="description" content="Detailed description including ${mainKeyword} that entices users to click...">`
                    }
                },
                {
                    id: 'headings',
                    title: 'Heading Structure (H1-H6)',
                    status: 'warning',
                    score: 65,
                    description: 'Headings provide hierarchy and help AI understand content structure.',
                    issues: [
                        'Multiple H1 tags found on the "Services" page.',
                        'Skipped heading levels (H2 followed immediately by H4).',
                        'Headings lack keyword relevance.'
                    ],
                    recommendation: {
                        title: 'Fix Heading Hierarchy',
                        text: 'Use exactly one H1 per page. Use H2s for main sections and H3s for subsections.',
                        code: `<h1>Main Page Topic (${mainKeyword})</h1>\n  <h2>Key Benefit or Feature</h2>\n    <h3>Specific Detail</h3>`
                    }
                },
                {
                    id: 'schema',
                    title: 'Schema Markup & Structured Data',
                    status: 'warning',
                    score: 60,
                    description: 'Schema helps search engines understand entities, products, and organizations.',
                    issues: [
                        'No "LocalBusiness" or "Organization" schema detected.',
                        'Product pages missing "Offer" and "AggregateRating" schema.',
                        'BreadcrumbList schema is incomplete.'
                    ],
                    recommendation: {
                        title: 'Implement JSON-LD Schema',
                        text: 'Add Organization schema to your homepage to establish brand entity trust.',
                        code: `<script type="application/ld+json">\n{\n  "@context": "https://schema.org",\n  "@type": "Organization",\n  "name": "Your Brand",\n  "url": "${url}",\n  "logo": "${url}/logo.png"\n}\n<\/script>`
                    }
                },
                {
                    id: 'alt',
                    title: 'Image Alt Text',
                    status: 'pass',
                    score: 92,
                    description: 'Alt text improves accessibility and helps search engines index images.',
                    issues: [], // Empty for pass
                    recommendation: {
                        title: 'Good Job!',
                        text: 'Most images have descriptive alt text. Continue this practice for new content.',
                        code: ''
                    }
                },
                {
                    id: 'performance',
                    title: 'Core Web Vitals & Speed',
                    status: 'warning',
                    score: 58,
                    description: 'Page speed directly affects ranking and user experience.',
                    issues: [
                        'Largest Contentful Paint (LCP) is 3.2s (Slow).',
                        'Images are not lazy-loaded.',
                        'Unused JavaScript detected on landing page.'
                    ],
                    recommendation: {
                        title: 'Optimize Images & Scripts',
                        text: 'Convert images to WebP format and defer non-critical JavaScript.',
                        code: `<img src="image.webp" loading="lazy" alt="...">\n<script src="script.js" defer><\/script>`
                    }
                }
            ]
        };
    }

    function renderResults(data) {
        // Render Stats
        document.getElementById('scoreOverall').textContent = data.overallScore;
        
        const counts = { pass: 0, warning: 0, error: 0 };
        data.checks.forEach(c => {
            if(c.status === 'pass') counts.pass++;
            else if(c.status === 'warning') counts.warning++;
            else counts.error++;
        });

        document.getElementById('countPass').textContent = counts.pass;
        document.getElementById('countWarn').textContent = counts.warning;
        document.getElementById('countErr').textContent = counts.error;

        // Render Grid
        const grid = document.getElementById('auditResultsGrid');
        grid.innerHTML = '';

        data.checks.forEach(check => {
            const statusColor = check.status === 'pass' ? 'status-pass' : (check.status === 'warning' ? 'status-warn' : 'status-fail');
            const statusLabel = check.status === 'pass' ? 'Passed' : (check.status === 'warning' ? 'Warning' : 'Critical Issue');
            
            let issuesHtml = '';
            if (check.issues.length > 0) {
                issuesHtml = `<ul class="issues-list">${check.issues.map(i => `<li>${i}</li>`).join('')}</ul>`;
            } else {
                issuesHtml = `<p style="color: var(--color-green-500); font-size: 0.9rem;">‚úì No issues detected.</p>`;
            }

            let recHtml = '';
            if (check.recommendation.text) {
                recHtml = `
                    <div class="rec-box">
                        <div class="rec-title">${check.recommendation.title}</div>
                        <p style="font-size: 0.9rem; margin-bottom: 0.5rem;">${check.recommendation.text}</p>
                        ${check.recommendation.code ? `<div class="code-snippet">${escapeHtml(check.recommendation.code)}</div>` : ''}
                    </div>
                `;
            }

            const card = document.createElement('div');
            card.className = 'audit-item';
            card.innerHTML = `
                <div class="audit-header">
                    <h3>${check.title}</h3>
                    <span class="status-badge ${statusColor}">${statusLabel}</span>
                </div>
                <div class="audit-body">
                    <p>${check.description}</p>
                    ${issuesHtml}
                    ${recHtml}
                </div>
            `;
            grid.appendChild(card);
        });
    }

    function escapeHtml(text) {
        return text.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;").replace(/'/g, "&#039;");
    }

    function exportJson() {
        if (!currentAuditData) return;
        const dataStr = "data:text/json;charset=utf-8," + encodeURIComponent(JSON.stringify(currentAuditData, null, 2));
        const downloadAnchorNode = document.createElement('a');
        downloadAnchorNode.setAttribute("href", dataStr);
        downloadAnchorNode.setAttribute("download", "seo_audit_report.json");
        document.body.appendChild(downloadAnchorNode);
        downloadAnchorNode.click();
        downloadAnchorNode.remove();
    }
</script>

</body>
</html>
